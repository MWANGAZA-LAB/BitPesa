# BitPesa Bridge - Environment Configuration Template
# Copy this file to .env and fill in your actual values

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Environment (development, staging, production)
NODE_ENV=development

# Application URLs
API_BASE_URL=http://localhost:8000
WEB_BASE_URL=http://localhost:3000

# Service Ports
PORT=3000
TRANSACTION_SERVICE_PORT=3001
MPESA_SERVICE_PORT=3002
MINMO_SERVICE_PORT=3003
NOTIFICATION_SERVICE_PORT=3004
RECEIPT_SERVICE_PORT=3005

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database
DATABASE_URL=postgresql://postgres:your_postgres_password_here@localhost:5432/bitpesa
POSTGRES_PASSWORD=your_postgres_password_here
POSTGRES_USER=postgres
POSTGRES_DB=bitpesa
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# =============================================================================
# MINMO API CONFIGURATION
# =============================================================================

# MinMo API Settings
MINMO_API_URL=https://api.minmo.com
MINMO_API_KEY=your_minmo_api_key_here
MINMO_WEBHOOK_SECRET=your_minmo_webhook_secret_here

# =============================================================================
# SAFARICOM DARAJA API CONFIGURATION
# =============================================================================

# Daraja API Credentials
DARAJA_CONSUMER_KEY=your_daraja_consumer_key_here
DARAJA_CONSUMER_SECRET=your_daraja_consumer_secret_here
DARAJA_BUSINESS_SHORT_CODE=your_business_short_code_here
DARAJA_PASSKEY=your_daraja_passkey_here
DARAJA_CALLBACK_URL=https://your-domain.com/api/v1/mpesa/callbacks

# =============================================================================
# AFRICA'S TALKING CONFIGURATION
# =============================================================================

# SMS Service
AFRICAS_TALKING_API_KEY=your_africas_talking_api_key_here
AFRICAS_TALKING_USERNAME=your_africas_talking_username_here

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration
JWT_SECRET=your_jwt_secret_here_minimum_32_characters
JWT_EXPIRATION_TIME=24h
JWT_REFRESH_EXPIRATION_TIME=7d

# Encryption
ENCRYPTION_KEY=your_encryption_key_here_minimum_32_characters

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Cache
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Levels: error, warn, info, debug, verbose
LOG_LEVEL=info
LOG_FORMAT=json

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Health Check Settings
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Metrics and Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Rate Limiting Settings
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# EXTERNAL SERVICE CONFIGURATION
# =============================================================================

# Request Timeouts (in milliseconds)
REQUEST_TIMEOUT_MS=30000
WEBHOOK_TIMEOUT_MS=10000
API_TIMEOUT_MS=30000

# Retry Configuration
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_MS=1000

# =============================================================================
# CIRCUIT BREAKER CONFIGURATION
# =============================================================================

# Circuit Breaker Settings
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT_MS=60000
CIRCUIT_BREAKER_MONITORING_PERIOD_MS=300000

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Notification Limits
MAX_NOTIFICATIONS_PER_MINUTE=60
MAX_NOTIFICATIONS_PER_HOUR=1000

# SMS Configuration
SMS_TIMEOUT_MS=10000
MAX_SMS_LENGTH=160

# Email Configuration
EMAIL_TIMEOUT_MS=15000
MAX_EMAIL_SUBJECT_LENGTH=100
MAX_EMAIL_BODY_LENGTH=10000

# =============================================================================
# TRANSACTION CONFIGURATION
# =============================================================================

# Transaction Limits
MIN_KES_AMOUNT=10
MAX_KES_AMOUNT=1000000
MIN_BTC_AMOUNT=0.00001
MAX_BTC_AMOUNT=1.0

# Fee Configuration
FEE_PERCENTAGE=0.025

# Invoice Configuration
INVOICE_EXPIRATION_MS=300000

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Settings (only for development environment)
DEBUG_MODE=false
ENABLE_SWAGGER=true
ENABLE_CORS=true
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# =============================================================================
# PRODUCTION CONFIGURATION
# =============================================================================

# Production Settings (only for production environment)
# Uncomment and configure for production deployment

# SSL Configuration
# SSL_CERT_PATH=/path/to/ssl/cert.pem
# SSL_KEY_PATH=/path/to/ssl/key.pem

# Load Balancer Configuration
# LOAD_BALANCER_IP=your_load_balancer_ip
# LOAD_BALANCER_PORT=443

# CDN Configuration
# CDN_URL=https://cdn.your-domain.com
# STATIC_ASSETS_URL=https://assets.your-domain.com

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Application Performance Monitoring
# APM_SERVER_URL=https://apm.your-domain.com
# APM_SECRET_TOKEN=your_apm_secret_token

# Log Aggregation
# LOGSTASH_URL=tcp://logstash.your-domain.com:5000
# ELASTICSEARCH_URL=https://elasticsearch.your-domain.com:9200

# Metrics Collection
# PROMETHEUS_URL=https://prometheus.your-domain.com:9090
# GRAFANA_URL=https://grafana.your-domain.com:3000

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Database Backup
# BACKUP_SCHEDULE=0 2 * * *
# BACKUP_RETENTION_DAYS=30
# BACKUP_S3_BUCKET=your-backup-bucket
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1

# =============================================================================
# SECURITY HEADERS AND CORS
# =============================================================================

# CORS Configuration
CORS_ORIGIN=http://localhost:3000
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# Security Headers
SECURITY_HEADERS_ENABLED=true
CONTENT_SECURITY_POLICY=default-src 'self'
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature Toggles
ENABLE_MINMO_INTEGRATION=true
ENABLE_MPESA_INTEGRATION=true
ENABLE_NOTIFICATION_SERVICE=true
ENABLE_RECEIPT_SERVICE=true
ENABLE_METRICS_COLLECTION=true
ENABLE_HEALTH_CHECKS=true

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test Database (for testing environment)
TEST_DATABASE_URL=postgresql://postgres:test_password@localhost:5432/bitpesa_test

# Test API Keys (use test/sandbox keys)
TEST_MINMO_API_KEY=test_minmo_api_key
TEST_DARAJA_CONSUMER_KEY=test_daraja_consumer_key
TEST_DARAJA_CONSUMER_SECRET=test_daraja_consumer_secret

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Docker Configuration
DOCKER_REGISTRY=ghcr.io
DOCKER_IMAGE_TAG=latest

# Kubernetes Configuration
KUBERNETES_NAMESPACE=bitpesa-minmo
KUBERNETES_CLUSTER_NAME=production

# =============================================================================
# SLACK NOTIFICATIONS
# =============================================================================

# Slack Webhook for Notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#deployments
SLACK_USERNAME=BitPesa Bot

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
SMTP_FROM=noreply@bitpesa.com

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================

# Webhook URLs for External Services
WEBHOOK_BASE_URL=https://your-domain.com/api/v1/webhooks
WEBHOOK_TIMEOUT_MS=10000
WEBHOOK_RETRY_ATTEMPTS=3

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Cache Settings
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=1000
CACHE_UPDATE_INTERVAL_MS=300000

# =============================================================================
# QUEUE CONFIGURATION
# =============================================================================

# Queue Settings
QUEUE_CONCURRENCY=5
QUEUE_MAX_RETRIES=3
QUEUE_RETRY_DELAY_MS=5000

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================

# File Upload Settings
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png
UPLOAD_PATH=/tmp/uploads

# S3 Configuration (if using S3 for file storage)
# AWS_S3_BUCKET=your-s3-bucket
# AWS_S3_REGION=us-east-1
# AWS_S3_ACCESS_KEY_ID=your_s3_access_key
# AWS_S3_SECRET_ACCESS_KEY=your_s3_secret_key
